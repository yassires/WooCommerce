!function(t){"use strict";window.onestore_media_open=!1,t.fn.OneStoreElement_Media=function(e){return this.on("click",".css-type-media .media-remove",(function(e){e.preventDefault();var n=t(this).closest(".css-type-media");return n.find("input.media-value").val("").trigger("change"),n.removeClass("has-media"),n.find(".media-preview").html(""),!1})),this.find(".css-type-media .upload-button").each((function(){var e;t(this).on("click",(function(n){n.preventDefault();var i=t(this).closest(".css-type-media");e||((e=wp.media({})).on("select",(function(){var n=e.state().get("selection").first().toJSON();i.find("input.media-value").val(n.url).trigger("change"),i.addClass("has-media");let a=t("<img/>");a.attr("src",n.url),i.find(".media-preview").html(a)})),e.on("open",(function(){window.onestore_media_open=!0})),e.on("close",(function(){setTimeout((function(){window.onestore_media_open=!1}),500)}))),e.open()}))}))},t.fn.OneStoreElement_Color=function(e){return this.each((function(){t(this).find(".color-picker").each((function(){var n=t(this);let i=n.parent().find(".color-picker-val");n.alphaColorPicker({change:function(){let t=n.wpColorPicker("color");e&&e.setting.set(t),i.length&&i.val(t).trigger("change")},clear:function(){e&&e.setting.set(""),i.length&&i.val("").trigger("change")}})}))}))},t.fn.OneStoreElement_Dimension=function(e){return this.each((function(){t(this).find(".onestore-dimension-fieldset").each((function(){t(this).each((function(e,n){var i=t(n),a=i.find(".onestore-dimension-unit"),o=i.find(".onestore-dimension-input"),r=i.find(".onestore-dimension-value");a.on("change",(function(t){var e=a.find('option[value="'+this.value+'"]');o.attr("min",e.attr("data-min")),o.attr("max",e.attr("data-max")),o.attr("step",e.attr("data-step")),o.val("").trigger("change")})),o.on("change blur",(function(t){var e=""===this.value?"":this.value.toString()+a.val().toString();r.val(e).trigger("change")}))}))}))}))},t.fn.OneStoreElement_Dimensions=function(e){return this.each((function(){t(this).find(".onestore-dimensions-fieldset").each((function(){t(this).each((function(e,n){var i=t(n),a=i.find(".onestore-dimensions-unit"),o=i.find(".onestore-dimensions-link"),r=i.find(".onestore-dimensions-unlink"),s=i.find(".onestore-dimensions-input"),l=i.find(".onestore-dimensions-value"),c="true"===l.attr("data-empty-auto");a.on("change",(function(t){var e=a.find('option[value="'+this.value+'"]');s.attr("min",e.attr("data-min")),s.attr("max",e.attr("data-max")),s.attr("step",e.attr("data-step")),s.val("").trigger("change")})),o.on("click",(function(t){t.preventDefault(),i.attr("data-linked","true"),s.val(s.first().val()).trigger("change"),s.first().focus()})),r.on("click",(function(t){t.preventDefault(),i.attr("data-linked","false"),s.first().focus()})),s.on("keyup mouseup",(function(t){"true"==i.attr("data-linked")&&s.not(this).val(this.value).trigger("change")})),s.on("change blur",(function(t){var e,n=[],i=a.val().toString(),o=!0;s.each((function(){this.value.length?(n.push(this.value.toString()+i),o=!1):c?n.push("_"):n.push("0")})),e=o?"   ":(e=n.join(" ")).replace(/_/gi,"auto"),l.val(e).trigger("change")}))}))}))}))},t.fn.OneStoreElement_Slider=function(e){return this.each((function(){t(this).find(".onestore-slider-fieldset").each((function(){var e=t(this),n=e.find(".onestore-slider-unit"),i=e.find(".onestore-slider-input"),a=e.find(".onestore-slider-ui"),o=e.find(".onestore-slider-reset"),r=e.find(".onestore-slider-value");a.slider({value:i.val(),min:+i.attr("min"),max:+i.attr("max"),step:+i.attr("step"),slide:function(t,e){i.val(e.value).trigger("change")}}),o.on("click",(function(e){var o=t(this).attr("data-number"),r=t(this).attr("data-unit");n.val(r),i.val(o).trigger("change"),a.slider("value",o)})),n.on("change",(function(t){var e=n.find('option[value="'+this.value+'"]');i.attr("min",e.attr("data-min")||!1),i.attr("max",e.attr("data-max")||!1),i.attr("step",e.attr("data-step")||!1),a.slider("option",{min:+i.attr("min"),max:+i.attr("max"),step:+i.attr("step")}),i.val("").trigger("change")})),i.on("change blur",(function(t){a.slider("value",this.value);var e="";e=n.length?""===this.value?"":this.value.toString()+n.val().toString():""===this.value?"":this.value.toString(),r.val(e).trigger("change")}))}))}))},t.fn.OneStoreElement_Typo=function(e){return this.each((function(){t(this).find(".onestore-typography-fieldset > .onestore-row-item").each((function(){var e=t(this),n=e.find(".onestore-typography-size-unit"),i=e.find(".onestore-typography-size-input"),a=e.find(".onestore-typography-size-value"),o=function(t){var e=n.find('option[value="'+t+'"]');i.attr("min",e.attr("data-min")||""),i.attr("max",e.attr("data-max")||""),i.attr("step",e.attr("data-step")||"")};n.on("change",(function(t){o(this.value),i.val("").trigger("change")})),o(n.val()),i.on("change blur",(function(t){var e=""===this.value?"":this.value.toString()+n.val().toString();console.log("Typo_value",e),a.val(e).trigger("change")}))}))}))},t.fn.OneStoreElement_Shadow=function(e){return this.each((function(){t(this).find(".onestore-shadow-fieldset").each((function(){var e=t(this),n=e.find(".onestore-shadow-input"),i=e.find(".onestore-shadow-value"),a=function(e){var a=n.map((function(){return t(this).hasClass("color-picker")?""===t(this).wpColorPicker("color")?"rgba(0,0,0,0)":t(this).wpColorPicker("color"):""===this.value?"0":this.value.toString()+"px"})).get();i.val(a.join(" ")).trigger("change")};e.find(".onestore-shadow-color .color-picker").alphaColorPicker({change:a,clear:a}),e.on("change blur",".onestore-shadow-input",a)}))}))},t.fn.OneStoreElement______=function(e){return this.each((function(){t(this).find(".onestore-dimension-fieldset").each((function(){}))}))}}(jQuery);